(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{167:function(t,e,s){"use strict";s.r(e);var r=s(0),n=Object(r.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),s("p",[t._v("MetricsManager 的接口见 "),s("a",{attrs:{href:"http://www.midwayjs.org/pandora/api-reference/metrics/interfaces/metricsmanager.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1)]),t._v(" "),t._m(12)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"监控数据上报"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#监控数据上报","aria-hidden":"true"}},[this._v("#")]),this._v(" 监控数据上报")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"默认的上报"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#默认的上报","aria-hidden":"true"}},[this._v("#")]),this._v(" 默认的上报")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("目前内置的监控数据上报有两个方式，命令行输出和文件输出，大部分场景下是"),e("code",[this._v("文件输出")]),this._v("。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"扩展上报"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#扩展上报","aria-hidden":"true"}},[this._v("#")]),this._v(" 扩展上报")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("实现上报的基础接口是 "),e("code",[this._v("Reporter")]),this._v(" ，包含 "),e("code",[this._v("start()")]),this._v(" 和 "),e("code",[this._v("stop()")]),this._v(" 方法。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("所有的实现都是围绕这两个方法来展开的，我们基于 "),e("code",[this._v("Reporter")]),this._v(" ，实现了一些可以继承的基类，大致继承关系如下。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://img.alicdn.com/tfs/TB1sRFxigvD8KJjy0FlXXagBFXa-478-235.png",alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Reporter 基础接口，没有实现")]),t._v(" "),s("li",[t._v("ScheduledMetricsReporter 针对 Metrics 的周期性采集的上报基类，只上报 Metrics")]),t._v(" "),s("li",[t._v("ConsoleReporter 通过命令行输出 Metrics 的信息")]),t._v(" "),s("li",[t._v("FileMetricsManagerReporter 通过写入文件的方式输出 Metrics 信息")]),t._v(" "),s("li",[t._v("CustomReporter 自定义上报基类，可以上报所有东西，一般自定义的上报会继承这个类")]),t._v(" "),s("li",[t._v("TraceReporter 上报链路信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"自定义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("这里介绍 "),e("code",[this._v("CustomReporter")]),this._v(" 的自定义，通过继承基类和实现 "),e("code",[this._v("report")]),this._v(" 抽象方法，可以方便的进行自定义的数据上报。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("MyReporter")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("CustomReporter")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  metricsManager"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  endPointService"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("report")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),s("span",{attrs:{class:"token comment"}},[t._v("// TODO execute report method where interval")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("继承 "),e("code",[this._v("CustomReporter")]),this._v(" 之后，会包含两个属性，"),e("code",[this._v("metricManager")]),this._v(" 和 "),e("code",[this._v("endPointService")]),this._v(", 这两个属性包含了 Pandora.js 的绝大部分监控的功能。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("endPointService 通过 "),e("code",[this._v("getEndPoint()")]),this._v(" 方法可以获取不同的 EndPoint，再通过 EndPoint 返回不同的结果，EndPoint 的方法请参考不同的 EndPoint。")])}],!1,null,null,null);n.options.__file="report.md";e.default=n.exports}}]);