<!DOCTYPE html>
<html lang="en">
<head>
  <title>Understand procfile.js - Ready to Boot</title>
  <meta charset="utf-8">
  <meta name="description" content="index.description">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" href="/pandora/css/index.css">

</head>
<body>
  <div class="nav" >
  <header>
    <a href="/pandora/en" class="nav-logo leftpadding" alt="Pandora.js"><img src="/pandora/images/nav-logo.png" > Pandora.js</a>
    <ul class="nav-item">
      <li><a href="/pandora/en/introduce.html" alt="Documentation">Documentation</a></li><li><a href="/pandora/en/api.html" alt="API reference">API reference</a></li><li><a href="https://github.com/midwayjs/pandora/releases" alt="Change Log">Change Log</a></li>
      <li class="translations">
        <a class="nav-link">Language - English</a>
        <span class="arrow" style="border-top-color:#fff" ></span>
        <ul class="dropdown-content" >
          <li style="display: block; margin-left: 20px" ><a style="color: #008ce6" href="/pandora/zh-cn">中文</a></li>
          <li style="display: block; margin-left: 20px" ><a style="color: #008ce6" href="/pandora/en">English</a></li>
        </ul>
      </li>
      <li><iframe src="https://ghbtns.com/github-btn.html?user=midwayjs&repo=pandora&type=star&count=true" frameborder="0" scrolling="0" width="150px" height="20px"></iframe></li>
    </ul>
    <a id="mobileTrigger" href="#" class="mobile-trigger">
      <ul>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </a>
  </header>
</div>

  <div id="container" class="container">
    <div class="page-main">
  <article class="markdown-body">
    <h1>Understand procfile.js</h1>
    <p>The <code>procfile.js</code> is a normal JS file, that provides chain style syntax to describe the process structure of the application. which can be based on procfile.js to describe the process layout, and use a lot of powerful functions provided by Pandora.js.</p>
<p>Of course, it's not just simply to create some processes. It doing much better:</p>
<blockquote>
<p>The Pandora.js will protect all created processes.</p>
<p>The simple functions as auto restart, rotate log files, and count the number of reset times.</p>
<p>The advanced functions as collect metrics over 30 indicators, auto business logic link tracing, integrate to existing APM ( such as Open-falcon ) and so on.</p>
</blockquote>
<h2 id="where-should-i-put-the-procfilejs"><a class="markdown-anchor" href="#where-should-i-put-the-procfilejs">#</a> Where should I put the procfile.js ?</h2>
<p>The Pandora.js looks for <code>procfile.js</code> within the following locations:</p>
<ul>
<li>${appDir}/procfile.js</li>
</ul>
<!--* ${appDir}/node_modules/.bin/procfile.js (For default behavior to be injected into the framework, the interface is reserved for the future, and there is no used) -->
<h2 id="start-a-simple-nodejs-program"><a class="markdown-anchor" href="#start-a-simple-nodejs-program">#</a> Start a simple Node.js program</h2>
<p>The type of the <code>pandora</code> object as below is <a href="http://www.midwayjs.org/pandora/api-reference/pandora/classes/procfilereconcileraccessor.html" target="_blank" rel="noopener">ProcfileReconcilerAccessor</a>, you can click to view the detailed API.</p>
<p>Let's look at an example:</p>
<p><code>procfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// The procfile.js is a normal Node.js module, that must export a function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The first parameter for function(pandora) is ProcfileReconcilerAccessor, which is used to define our process structure.</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">pandora</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  pandora</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Define a process named processA</span></span><br><span class="line">    .process(<span class="string">'processA'</span>)</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// If scale is greater than 1, a process group will be automatically produced using the cluster module of Node.js</span></span><br><span class="line">    <span class="comment">// The default value is 1</span></span><br><span class="line">    .scale(<span class="number">1</span>)</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// Define process environment variables, which can be got by process.env in the process just created.</span></span><br><span class="line">    .env(&#123;</span><br><span class="line">      ENV_VAR1: <span class="string">'VALUE_OF_ENV_VAR1'</span></span><br><span class="line">    &#125;)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// The entry file of this process</span></span><br><span class="line">	.entry(<span class="string">'./app.js'</span>);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>app.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">`Got the value of ENV_VAR1: <span class="subst">$&#123;process.env. ENV_VAR1&#125;</span> from Process [pid = <span class="subst">$&#123;process.pid&#125;</span>]`</span>);</span><br></pre></td></tr></table></figure>
<p>Then we run the command：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pandora dev <span class="comment"># Start an application at the front via pandora dev, mostly for local debugging</span></span><br><span class="line">Got the value of ENV_VAR1: VALUE_OF_ENV_VAR1 from Process [pid = 19766]</span><br><span class="line">2017-12-11 13:59:12,578 INFO 19530 Process [name = processA, pid = 19766] Started successfully!</span><br><span class="line">** Application start successful. **</span><br></pre></td></tr></table></figure>
<h2 id="auto-scaling-process-based-on-scale"><a class="markdown-anchor" href="#auto-scaling-process-based-on-scale">#</a> Auto-scaling process based on scale</h2>
<p>Try to change <code>.scale(1)</code> of the above example to <code>.scale(4)</code>, and start it at the front:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pandora dev <span class="comment"># Start an application at the front via pandora dev, mostly for local debugging</span></span><br><span class="line">Got the value of ENV_VAR1: VALUE_OF_ENV_VAR1 from Process [pid = 19913]</span><br><span class="line">Got the value of ENV_VAR1: VALUE_OF_ENV_VAR1 from Process [pid = 19915]</span><br><span class="line">Got the value of ENV_VAR1: VALUE_OF_ENV_VAR1 from Process [pid = 19916]</span><br><span class="line">Got the value of ENV_VAR1: VALUE_OF_ENV_VAR1 from Process [pid = 19914]</span><br><span class="line">2017-12-11 14:04:57,836 INFO 19910 Process [name = processA, pid = 19912] Started successfully!</span><br><span class="line">** Application start successful. **</span><br></pre></td></tr></table></figure>
<p>We can see that the process has scaled to 4, each is the 19913, 19915, 19916, 19914. We can also see 19912, which is the master of those 4 processes.</p>
<p>The following image may be easier to understand:</p>
<p><img src="https://img.alicdn.com/tfs/TB1zC45hr_I8KJjy1XaXXbsxpXa-1768-916.png" alt="img"></p>
<h2 id="two-convenient-alias-fork-and-cluster"><a class="markdown-anchor" href="#two-convenient-alias-fork-and-cluster">#</a> Two convenient alias: fork and cluster</h2>
<p>To facilitate user use, we offer two easy-to-use alias, cluster and fork.</p>
<p>On the one hand is for easy to use, but also for compatible with the stock of Node.js applications, let those stock applications can also be used very easily.</p>
<p><strong>Fork</strong></p>
<p>The pandora.fork() is an alias of the process.process().</p>
<p><code>procfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">pandora</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start ./app.js directly, equivalent to use child_process.spawn to start process.</span></span><br><span class="line">  pandora.fork(<span class="string">'aForkedProcess'</span>, <span class="string">'./app.js'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The above example is equivalent to below:</p>
<p><code>procfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">pandora</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  pandora</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Define a process named aForkedApp</span></span><br><span class="line">    .process(<span class="string">'aForkedApp'</span>)</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// Specify only scale to 1</span></span><br><span class="line">    .scale(<span class="number">1</span>)</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// Specify entry file of this process</span></span><br><span class="line">    .entry(<span class="string">'./app.js'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Cluster</strong></p>
<p>The pandora.cluster() is an alias of the process.service().</p>
<p><code>procfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">pandora</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start app. js with the cluster module</span></span><br><span class="line">  <span class="comment">// By default, allocate to 'worker' process.</span></span><br><span class="line">  <span class="comment">// Pandora. js has a built-in process definition "process('worker').scale('auto')".  ('auto' means the number of CPUs).</span></span><br><span class="line">  pandora.cluster(<span class="string">'./app.js'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The above example is equivalent to below:</p>
<p><code>procfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">pandora</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Define a process named 'worker', which is actually already a built-in definition of the Pandora.js.</span></span><br><span class="line">  pandora</span><br><span class="line">    .process(<span class="string">'worker'</span>)</span><br><span class="line">    .scale(<span class="string">'auto'</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Define a service, and allocate it into 'worker' process.</span></span><br><span class="line">  <span class="comment">// Do only one thing, require('./app.js').</span></span><br><span class="line">  pandora</span><br><span class="line">    .service(<span class="string">'scalableService'</span>, <span class="class"><span class="keyword">class</span> <span class="title">ScalableService</span> </span>&#123;</span><br><span class="line">      start() &#123;</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">'./app.js'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .process(<span class="string">'worker'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="the-mechanism-of-the-service"><a class="markdown-anchor" href="#the-mechanism-of-the-service">#</a> The mechanism of the service</h2>
<p>In the previous, we talked about that pandora.cluster() is a alias for process.service. So what exactly is the Service ?</p>
<p>Service also defines the Node.js program in the process, but more structured.</p>
<p>provides the following basis capabilities:</p>
<ol>
<li>The standard <code>async start()</code> interface, so that users can asynchronous start the Node.js program.</li>
<li>The standard <code>async stop()</code> interface, so users can graceful stop the Node.js program ( such as graceful offline the RPC services, so that can prevent service interrupt ).</li>
<li>The structured log management, and the configure capabilities.</li>
<li>Manage start order (dependency relationship) in the process.</li>
</ol>
<p>A simple example as below:</p>
<p><code>procfile.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">pandora</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  pandora</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Define a service, named httpServer, implement on ./httpServer</span></span><br><span class="line">    .service(<span class="string">'httpServer'</span>, <span class="string">'./httpServer'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Config it</span></span><br><span class="line">    .config(&#123;</span><br><span class="line">      port: <span class="number">1338</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Allocate to 'worker' process group, actually you doesn't have to be written it, the default is 'worker'.</span></span><br><span class="line">    <span class="comment">// Pandora.js built-in a 'pandora.process('worker').scale('auto')' definition.</span></span><br><span class="line">    .process(<span class="string">'worker'</span>);</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>httpServer.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="class"><span class="keyword">class</span> <span class="title">HTTPServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Passed a context object when constructed</span></span><br><span class="line">  <span class="keyword">constructor</span>(serviceContext) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(serviceContext);</span><br><span class="line">    <span class="keyword">this</span>.config = serviceContext.config;</span><br><span class="line">    <span class="keyword">this</span>.logger = serviceContext.logger;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Standard start() interface</span></span><br><span class="line">  <span class="keyword">async</span> start () &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">this</span>.server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// Standard logger object, that will logged into $&#123;logsDir&#125;/$&#123;appName&#125;/service.log</span></span><br><span class="line">      <span class="keyword">this</span>.logger.info(<span class="string">'Got a request url: '</span> + req.url);</span><br><span class="line"></span><br><span class="line">      res.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>&#125;);</span><br><span class="line">      res.end(<span class="string">'Hello Pandora.js'</span>);</span><br><span class="line">      </span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">// Standard start interface，await for server to listen to be succeed.</span></span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.server.listen(<span class="keyword">this</span>.config.port, (err) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span>(err) &#123;</span><br><span class="line">          <span class="keyword">return</span> reject(err);</span><br><span class="line">        &#125;</span><br><span class="line">        resolve();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Listens on http://127.0.0.1:'</span> + <span class="keyword">this</span>.config.port);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Standard stop interface, there will be a 5 seconds time window at the stop to deal with the work.</span></span><br><span class="line">  <span class="keyword">async</span> stop () &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.server.close(resolve);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Service stopped'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Then we can start with the following commands:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pandora dev</span><br><span class="line">Listens on http://127.0.0.1:1338</span><br><span class="line">2017-12-11 14:34:22,340 INFO 21481 Process [name = worker, pid = 21483] Started successfully!</span><br><span class="line">** Application start successful. **</span><br></pre></td></tr></table></figure>
<p>We can saw <code>Listens on http://127.0.0.1:1338</code>, The service has been successfully started.</p>
<p>Open <code>http://127.0.0.1:1338</code>, that already been available, and at <code>${logsDir}/${appName}/service.log</code> you can also see that the logs is already written.</p>
<p>Then press the <code>Ctrl + c</code> to stop, We can also see the output of <code>Service stopped</code>.</p>
<h2 id="pandora-dev-and-pandora-start"><a class="markdown-anchor" href="#pandora-dev-and-pandora-start">#</a> Pandora dev and pandora start</h2>
<ol>
<li>
<p>the pandora dev command mainly used for local debugging. That does't start the daemon process, and that start application at the front.</p>
</li>
<li>
<p>the pandora start command mainly used for the production environment, it use the daemon process to protect applications, and start the application at the background.</p>
</li>
</ol>
<p>In the <code>procfile.js</code>, you can use the following statement to decide the environment:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (pandora.dev) &#123;</span><br><span class="line">  <span class="comment">// started by pandora dev</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// started by pandora start</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="built-in-default-definition"><a class="markdown-anchor" href="#built-in-default-definition">#</a> Built-in default definition</h2>
<p><code>procfile.js</code> has some default behavior in order to facilitate use:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Define the default process for the service allocation.</span></span><br><span class="line">pandora.defaultServiceCategory(<span class="string">'worker'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the 'worker' process, we just talked about.</span></span><br><span class="line">pandora.process(<span class="string">'worker'</span>)</span><br><span class="line">  <span class="comment">// Scale this process, in dev mode only start one, in the production environment it will start the number of CPUs.</span></span><br><span class="line">  .scale(pandora.dev ? <span class="number">1</span> : <span class="string">'auto'</span>)</span><br><span class="line">  <span class="comment">// Define the environmental variables</span></span><br><span class="line">  .env(&#123;<span class="attr">worker</span>: <span class="string">'true'</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define a background task process, named 'background'.</span></span><br><span class="line">pandora.process(<span class="string">'background'</span>)</span><br><span class="line">  <span class="comment">// Only start one by default.</span></span><br><span class="line">  .scale(<span class="number">1</span>)</span><br><span class="line">  .env(&#123;<span class="attr">background</span>: <span class="string">'true'</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define a basic LoggerService</span></span><br><span class="line">pandora.service(<span class="string">'logger'</span>, LoggerService)</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The process is not defined and will start, it will start when only some services has assigned.</span></span><br><span class="line"><span class="comment">  * The .process('worker') means allocate to 'worker' process</span></span><br><span class="line"><span class="comment">  * The .process('all')  means allocate to all processes</span></span><br><span class="line"><span class="comment">  * The .process('weak-all') means allocate to all available processes, available process means in this process has some services already allocated (without 'weak-all').</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  .process(<span class="string">'weak-all'</span>);</span><br></pre></td></tr></table></figure>

  </article>
  <aside id="mobileAside" class="toc">
  <div class="mobile-menu">
    <ul><li><a href="/pandora/en/introduce.html" alt="Documentation">Documentation</a></li><li><a href="/pandora/en/api.html" alt="API reference">API reference</a></li><li><a href="https://github.com/midwayjs/pandora/releases" alt="Change Log">Change Log</a></li></ul>
  </div>
  <dl><dt><a href="/pandora/en/introduce.html">What is the Pandora.js</a></dt></ul></dd><dt><a href="/pandora/en/quickstart.html">Quick Start</a></dt></ul></dd><dt><a href="/pandora/en/glossary.html">Glossary</a></dt></ul></dd><dt>Basic Features</dt><dd><ul><li><a href="/pandora/en/base/command.html">Commands</a></li><li><a href="/pandora/en/other/dashboard.html">GUI Dashboard</a></li><li><a href="/pandora/en/base/procfile_mode.html">Understand procfile.js</a></li><li><a href="/pandora/en/base/dorapan.html">User SDK - Dorapan</a></li><li><a href="/pandora/en/base/logs.html">Log management</a></li><li><a href="/pandora/en/base/global_config.html">Global Config</a></li><li><a href="/pandora/en/base/quick_monitor.html">Monitoring Quick Start</a></li><li><a href="/pandora/en/base/debug.html">Debugging</a></li></ul></dd><dt>Advanced Processes Model</dt><dd><ul><li><a href="/pandora/en/process/process_std.html">Custom Process</a></li><li><a href="/pandora/en/process/service_std.html">Custom Service</a></li><li><a href="/pandora/en/process/fork_and_cluster.html">Fork And Cluster</a></li><li><a href="/pandora/en/process/environment_std.html">Custom Environment</a></li><li><a href="/pandora/en/process/application_life_cycle.html">Application Life Cycle</a></li><li><a href="/pandora/en/process/ipc_hub.html">IPC-Hub</a></li></ul></dd><dt>Application Monitoring</dt><dd><ul><li><a href="/pandora/en/monitor/monitor_std.html">Overview of Monitoring</a></li><li><a href="/pandora/en/monitor/resource.html">Exposed RESTFul API</a></li><li><a href="/pandora/en/monitor/trace.html">Trace Each Requests</a></li><li><a href="/pandora/en/monitor/monitor_inner.html">Base Monitoring</a></li><li><a href="/pandora/en/monitor/endpoint.html">EndPoint usage and extension</a></li><li><a href="/pandora/en/monitor/metrics.html">Metrics usage and extension</a></li><li><a href="/pandora/en/monitor/report.html">Monitoring Data Report</a></li></ul></dd><dt>Monitoring Data Collection</dt><dd><ul><li><a href="/pandora/en/collect/health.html">Health Check</a></li></ul></dd><dt>Extension</dt><dd><ul><li><a href="/pandora/en/other/typescript.html">Start A TypeScript Project</a></li></ul></dd></dl>
</aside>
<script>
var mobileTrigger = document.getElementById('mobileTrigger');
var mobileAside = document.getElementById('mobileAside');
mobileTrigger.onclick = function(e) {
  e.preventDefault();
  if (mobileAside.className.indexOf('mobile-show') === -1) {
    mobileAside.className += ' mobile-show';
  } else {
    mobileAside.className = 'toc';
  }
};
</script>

</div>

  </div>
</body>
<div class="cnzz">
<script src="https://s19.cnzz.com/z_stat.php?id=1271324644&web_id=1271324644" language="JavaScript"></script>
</div>

</html>
