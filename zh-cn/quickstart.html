<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快速上手</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/styles.3a9f1cdc.css" as="style"><link rel="preload" href="/assets/js/app.3a9f1cdc.js" as="script"><link rel="preload" href="/assets/js/59.9b4e1542.js" as="script"><link rel="prefetch" href="/assets/js/28.cec8f2d2.js"><link rel="prefetch" href="/assets/css/1.styles.5a8ea794.css"><link rel="prefetch" href="/assets/js/1.5a8ea794.js"><link rel="prefetch" href="/assets/css/2.styles.6509c70d.css"><link rel="prefetch" href="/assets/js/2.6509c70d.js"><link rel="prefetch" href="/assets/js/3.8b7e0031.js"><link rel="prefetch" href="/assets/js/4.9744725a.js"><link rel="prefetch" href="/assets/js/5.42681610.js"><link rel="prefetch" href="/assets/js/6.5d7ec2de.js"><link rel="prefetch" href="/assets/js/7.b8138455.js"><link rel="prefetch" href="/assets/js/8.e076a4aa.js"><link rel="prefetch" href="/assets/js/9.e5e16c98.js"><link rel="prefetch" href="/assets/js/10.158db2a2.js"><link rel="prefetch" href="/assets/js/11.a671d306.js"><link rel="prefetch" href="/assets/js/12.d3b4cf81.js"><link rel="prefetch" href="/assets/js/13.cd4aef58.js"><link rel="prefetch" href="/assets/js/14.67de5e1b.js"><link rel="prefetch" href="/assets/js/15.23fa35c0.js"><link rel="prefetch" href="/assets/js/16.932056a0.js"><link rel="prefetch" href="/assets/js/17.6b3b2d8d.js"><link rel="prefetch" href="/assets/js/18.d7a62273.js"><link rel="prefetch" href="/assets/js/19.094d0337.js"><link rel="prefetch" href="/assets/js/20.85c69cd6.js"><link rel="prefetch" href="/assets/js/21.b036638e.js"><link rel="prefetch" href="/assets/js/22.d745dd85.js"><link rel="prefetch" href="/assets/js/23.0aa8926b.js"><link rel="prefetch" href="/assets/js/24.ff8b4a3d.js"><link rel="prefetch" href="/assets/js/25.697e3d76.js"><link rel="prefetch" href="/assets/js/26.99c5150c.js"><link rel="prefetch" href="/assets/js/27.b44c6890.js"><link rel="prefetch" href="/assets/js/29.e7ccd45d.js"><link rel="prefetch" href="/assets/js/30.63a6b1c0.js"><link rel="prefetch" href="/assets/js/31.b761aeb7.js"><link rel="prefetch" href="/assets/js/32.a70d25f0.js"><link rel="prefetch" href="/assets/js/33.cd88dfdf.js"><link rel="prefetch" href="/assets/js/34.ccfe605c.js"><link rel="prefetch" href="/assets/js/35.0fb34bfe.js"><link rel="prefetch" href="/assets/js/36.9639fe30.js"><link rel="prefetch" href="/assets/js/37.3d70aba1.js"><link rel="prefetch" href="/assets/js/38.0d9de720.js"><link rel="prefetch" href="/assets/js/39.2954799a.js"><link rel="prefetch" href="/assets/js/40.b2bcddf7.js"><link rel="prefetch" href="/assets/js/41.3208960c.js"><link rel="prefetch" href="/assets/js/42.00947f66.js"><link rel="prefetch" href="/assets/js/43.1a8476d8.js"><link rel="prefetch" href="/assets/js/44.5e3a4f21.js"><link rel="prefetch" href="/assets/js/45.95a81b10.js"><link rel="prefetch" href="/assets/js/46.5d4bb088.js"><link rel="prefetch" href="/assets/js/47.fa2d11ba.js"><link rel="prefetch" href="/assets/js/48.d4d3396e.js"><link rel="prefetch" href="/assets/js/49.15ada0f8.js"><link rel="prefetch" href="/assets/js/50.8235420e.js"><link rel="prefetch" href="/assets/js/51.cba6e66f.js"><link rel="prefetch" href="/assets/js/52.05127c71.js"><link rel="prefetch" href="/assets/js/53.b9a2b2f4.js"><link rel="prefetch" href="/assets/js/54.742373fd.js"><link rel="prefetch" href="/assets/js/55.cd73c4f7.js"><link rel="prefetch" href="/assets/js/56.743d4627.js"><link rel="prefetch" href="/assets/js/57.d149a960.js"><link rel="prefetch" href="/assets/js/58.e3085eda.js">
    <link rel="stylesheet" href="/assets/css/1.styles.5a8ea794.css"><link rel="stylesheet" href="/assets/css/2.styles.6509c70d.css"><link rel="stylesheet" href="/assets/css/styles.3a9f1cdc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>快速上手</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh-cn/quickstart.html#环境依赖" class="sidebar-link">环境依赖</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-cn/quickstart.html#本节目标" class="sidebar-link">本节目标</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-cn/quickstart.html#关于可视化管理面板" class="sidebar-link">关于可视化管理面板</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-cn/quickstart.html#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-cn/quickstart.html#生成-procfile-js" class="sidebar-link">生成 Procfile.js</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-cn/quickstart.html#通过应用本身脚本启停" class="sidebar-link">通过应用本身脚本启停</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zh-cn/quickstart.html#全局模式下启停应用" class="sidebar-link">全局模式下启停应用</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="快速上手"><a href="#快速上手" aria-hidden="true" class="header-anchor">#</a> 快速上手</h1> <h2 id="环境依赖"><a href="#环境依赖" aria-hidden="true" class="header-anchor">#</a> 环境依赖</h2> <p>操作系统：支持 macOS，Linux
运行环境：建议选择 LTS 版本，最低要求 8.x</p> <h2 id="本节目标"><a href="#本节目标" aria-hidden="true" class="header-anchor">#</a> 本节目标</h2> <ol><li><p>Pandora.js 最基础的 procfile.js 文件编写。</p></li> <li><p>了解 Pandora.js 最基础的 start, stop, dev, exit, list 命令</p></li></ol> <h2 id="关于可视化管理面板"><a href="#关于可视化管理面板" aria-hidden="true" class="header-anchor">#</a> 关于可视化管理面板</h2> <p>具体请移步 <a href="http://www.midwayjs.org/pandora/zh-cn/other/dashboard.html" target="_blank" rel="noopener noreferrer">可视化管理面板<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <p>Pandora.js 可以直接安装在应用程序中，也可以安装在全局。</p> <div class="language-sh extra-class"><pre class="language-text"><code>npm i pandora -g  // 安装在全局
npm i pandora --save   // 安装在应用
</code></pre></div><h2 id="生成-procfile-js"><a href="#生成-procfile-js" aria-hidden="true" class="header-anchor">#</a> 生成 Procfile.js</h2> <p>Pandora.js 通过项目根目录下 <code>procfile.js</code> 定义应用进程结构，所以你需要在项目根目录下增加一个 <code>procfile.js</code> 文件。
我们这章介绍最简单的 Fork 和 Cluster 方式，下面介绍的两种模式你只需要任选其一。</p> <h4 id="fork-方式"><a href="#fork-方式" aria-hidden="true" class="header-anchor">#</a> Fork 方式</h4> <p>Fork 方式是最简单的方式，只是简单拉起应用，类似于直接  <code>node app.js</code>。</p> <p>使用初始化命令自动生成：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pandora init ./app.js <span class="token comment"># app.js 是你的 Node.js 程序路径</span>
? Which <span class="token function">type</span> <span class="token keyword">do</span> you like to generate ? <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
❯ fork 
  cluster 
** The procfile.js was auto generated to location /xx/xx/procfile.js **
</code></pre></div><p>然后你就会得到一个默认 <code>procfile.js</code> 你可以打开看一下，内容大致如下（隐去注释）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span>pandora<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  pandora
    <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token string">'appName'</span><span class="token punctuation">,</span> <span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="cluster-方式"><a href="#cluster-方式" aria-hidden="true" class="header-anchor">#</a> Cluster 方式</h4> <p>Cluster 方式是 Node.js Web Server 最常用的，我们默认会启动 CPU 数量的 Worker（不过你也可以改变这一默认值）。</p> <p>使用初始化命令自动生成：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pandora init ./app.js <span class="token comment"># app.js 是你的 Node.js 程序路径</span>
? Which <span class="token function">type</span> <span class="token keyword">do</span> you like to generate ? <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
  fork 
❯ cluster 
** The procfile.js was auto generated to location /xx/xx/procfile.js **
</code></pre></div><p>然后你就会得到一个默认 <code>procfile.js</code> 你可以打开看一下，内容大致如下（隐去注释）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span>pandora<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  pandora
  
    <span class="token comment">// 默认启动到 worker 进程分组</span>
    <span class="token punctuation">.</span><span class="token function">cluster</span><span class="token punctuation">(</span><span class="token string">'./app.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
  <span class="token comment">/* 自定义 Worker 数量
  pandora
    .process('worker')
    
    // 修改 worker 进程分组启动 2 个 worker 
    // ，默认是 pandora.dev ? 1 : 'auto'。
    // 意思就是 pandora dev 启动的话就不 Cluster 
    // ，如果 pandora start 启动的话就 Cluster 到 CPU 数量。
    .scale(2); 
  */</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h2 id="通过应用本身脚本启停"><a href="#通过应用本身脚本启停" aria-hidden="true" class="header-anchor">#</a> 通过应用本身脚本启停</h2> <p>这种情况下， pandora 会进入应用的整个开发流程，一般情况下，我们会将 pandora 命令写到 scripts 段落中。</p> <div class="language-json extra-class"><pre class="language-json"><code>// package.json
<span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pandora dev&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pandora start&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stop&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pandora stop&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个时候，你可以通过 <code>scripts</code> 本身的机制来运行，比如</p> <div class="language- extra-class"><pre class="language-text"><code>npm run dev // 本地启动
npm run start // 线上启动
npm run stop // 线上停止
</code></pre></div><h2 id="全局模式下启停应用"><a href="#全局模式下启停应用" aria-hidden="true" class="header-anchor">#</a> 全局模式下启停应用</h2> <div class="language-sh extra-class"><pre class="language-text"><code>pandora start [--name xxx] [path]
</code></pre></div><p>比如当前在应用根目录，应用为 <code>helloApp</code>。</p> <div class="language-sh extra-class"><pre class="language-text"><code>pandora start
pandora start --name helloApp
</code></pre></div><p>第一个命令会以 package.json 中的 name 或目录最后一截作为应用名，这样，应用会按照 procfile.js 的定义默默启动，并在后台运行。</p> <p>如果希望在前台启动（仅本地调试），可以使用 dev 命令。</p> <div class="language-sh extra-class"><pre class="language-text"><code>pandora dev
</code></pre></div><p>当应用启动之后，可以通过 list 命令查看。</p> <div class="language-sh extra-class"><pre class="language-text"><code>pandora list
</code></pre></div><p>也可以将它停止运行。</p> <div class="language-sh extra-class"><pre class="language-text"><code>pandora stop
</code></pre></div><blockquote><p>因为 pandora 全局模式下一般在后台启动，所以最好是部署到服务器上才这么做。</p></blockquote> <p>一般情况下，使用过 start 命令启动应用之后，Daemon 进程依旧会常驻在内存中，这个时候就需要手动 exit，将 Daemon 进程正常退出，注意，使用 kill 指令不一定能够有效的杀死 Daemon 进程。</p> <div class="language-sh extra-class"><pre class="language-text"><code>pandora exit
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/59.9b4e1542.js" defer></script><script src="/assets/js/app.3a9f1cdc.js" defer></script>
  </body>
</html>
