<!DOCTYPE html>
<html lang="en">
<head>
  <title>Log management - Ready to Boot</title>
  <meta charset="utf-8">
  <meta name="description" content="index.description">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" href="/pandora/css/index.css">

</head>
<body>
  <div class="nav" >
  <header>
    <a href="/pandora/en" class="nav-logo leftpadding" alt="Pandora.js"><img src="/pandora/images/nav-logo.png" > Pandora.js</a>
    <ul class="nav-item">
      <li><a href="/pandora/en/introduce.html" alt="Documentation">Documentation</a></li><li><a href="/pandora/en/api.html" alt="API reference">API reference</a></li><li><a href="https://github.com/midwayjs/pandora/releases" alt="Change Log">Change Log</a></li>
      <li class="translations">
        <a class="nav-link">Language - English</a>
        <span class="arrow" style="border-top-color:#fff" ></span>
        <ul class="dropdown-content" >
          <li style="display: block; margin-left: 20px" ><a style="color: #008ce6" href="/pandora/zh-cn">中文</a></li>
          <li style="display: block; margin-left: 20px" ><a style="color: #008ce6" href="/pandora/en">English</a></li>
        </ul>
      </li>
      <li><iframe src="https://ghbtns.com/github-btn.html?user=midwayjs&repo=pandora&type=star&count=true" frameborder="0" scrolling="0" width="150px" height="20px"></iframe></li>
    </ul>
    <a id="mobileTrigger" href="#" class="mobile-trigger">
      <ul>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </a>
  </header>
</div>

  <div id="container" class="container">
    <div class="page-main">
  <article class="markdown-body">
    <h1>Log management</h1>
    <h2 id="log-directory-structure"><a class="markdown-anchor" href="#log-directory-structure">#</a> Log directory structure</h2>
<p>Based on the directory specification, we have agreed on the following directory structure.</p>
<p>loggDir default is <code>~/logs</code>, that can be changed via global config, please check the following sections.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">- $&#123;loggDir&#125;</span><br><span class="line">	- pandorajs</span><br><span class="line">		- deamon.log <span class="comment">// Pandora.js deamon log</span></span><br><span class="line">		- metrics.log </span><br><span class="line">	- $appName</span><br><span class="line">		- nodejs_stdout.log <span class="comment">// nodejs ouput log</span></span><br><span class="line">		- error.log <span class="comment">// Application of self-defined log files</span></span><br><span class="line">	- $appName2 <span class="comment">// application use egg framework</span></span><br><span class="line">		- nodejs_stdout.log</span><br><span class="line">		- common-error.log</span><br><span class="line">		- ...</span><br></pre></td></tr></table></figure>
<h2 id="node-js-standard-output"><a class="markdown-anchor" href="#node-js-standard-output">#</a> Node. js standard output</h2>
<ol>
<li>Pandora. js will write stdout at <code>${logsDir}/${appName}/nodejs_stdout.log</code></li>
<li>log will be reload by date</li>
</ol>
<h2 id="log-default-configuration"><a class="markdown-anchor" href="#log-default-configuration">#</a> Log default configuration</h2>
<p>Log behavior can be configured by global configuration, like:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  logger: &#123;</span><br><span class="line">    logsDir: join(homedir(), <span class="string">'logs'</span>), <span class="comment">// log directory</span></span><br><span class="line">    appLogger: &#123; <span class="comment">// Log configuration for each application, basically stdout</span></span><br><span class="line">      stdoutLevel: <span class="string">'NONE'</span>, <span class="comment">// Please make sure you do not change this configuration by default without output to the stdout of daemon</span></span><br><span class="line">      level: <span class="string">'INFO'</span> <span class="comment">// Default record INFO information, such as application start or stop, is recommended to keep INFO</span></span><br><span class="line">    &#125;,</span><br><span class="line">    isolatedServiceLogger: <span class="literal">false</span> <span class="comment">// Service log is scattered into a single log file, it is recommended to keep false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="log-level"><a class="markdown-anchor" href="#log-level">#</a> Log Level</h2>
<ol>
<li>ALL - All level</li>
<li>DEBUG - DEBUG and below</li>
<li>INFO - INFO and below</li>
<li>WARN - WARN and below</li>
<li>ERROR - ERROR and below</li>
<li>NONE - No output</li>
</ol>
<h2 id="create-custom-logs"><a class="markdown-anchor" href="#create-custom-logs">#</a> Create custom logs</h2>
<p>You can create by  <code>require('dorapan').getService('logger').createLogger(name, config)</code> ，and config is defined as follows下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  dir: string; // log directory</span><br><span class="line">  stdoutLevel: string; // stdout level，default is ERROR</span><br><span class="line">  level: string; // the log of file ouput level，default is WARN</span><br><span class="line">  type: string; // the type of log cutting type， optional date and size，default is date</span><br><span class="line">  rotateDuration?: number; // the check during time of log file size to cut，unit is millisecond</span><br><span class="line">  maxFiles?: number; // The maximum number of file by size cut</span><br><span class="line">  maxFileSize?: number; // The maximum file size by sise cut</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>More detail <a href="http://www.midwayjs.org/pandora/api-reference/service-logger/classes/loggerservice.html" target="_blank" rel="noopener">LoggerService</a>。</p>
<h2 id="connect-to-log-service"><a class="markdown-anchor" href="#connect-to-log-service">#</a> Connect to log service</h2>
<p>Discussion：<a href="https://github.com/midwayjs/pandora/issues/50" target="_blank" rel="noopener">https://github.com/midwayjs/pandora/issues/50</a></p>
<h2 id="automatic-log-cleaning"><a class="markdown-anchor" href="#automatic-log-cleaning">#</a> Automatic log cleaning</h2>
<p>Pandora.js has cut the log by day (or size), and does not provide log cleaning. You can configure a simple <code>crontab</code> for<code>~ / logs</code>, like <a href="https://www.cnblogs.com/peida/archive/2013/03/25/2980121.html" target="_blank" rel="noopener">similar tutorial</a>。</p>

  </article>
  <aside id="mobileAside" class="toc">
  <div class="mobile-menu">
    <ul><li><a href="/pandora/en/introduce.html" alt="Documentation">Documentation</a></li><li><a href="/pandora/en/api.html" alt="API reference">API reference</a></li><li><a href="https://github.com/midwayjs/pandora/releases" alt="Change Log">Change Log</a></li></ul>
  </div>
  <dl><dt><a href="/pandora/en/introduce.html">What is the Pandora.js</a></dt></ul></dd><dt><a href="/pandora/en/quickstart.html">Quick Start</a></dt></ul></dd><dt><a href="/pandora/en/glossary.html">Glossary</a></dt></ul></dd><dt>Basic Features</dt><dd><ul><li><a href="/pandora/en/base/command.html">Commands</a></li><li><a href="/pandora/en/other/dashboard.html">GUI Dashboard</a></li><li><a href="/pandora/en/base/procfile_mode.html">Understand procfile.js</a></li><li><a href="/pandora/en/base/dorapan.html">User SDK - Dorapan</a></li><li><a href="/pandora/en/base/logs.html">Log management</a></li><li><a href="/pandora/en/base/global_config.html">Global Config</a></li><li><a href="/pandora/en/base/quick_monitor.html">Monitoring Quick Start</a></li><li><a href="/pandora/en/base/debug.html">Debugging</a></li></ul></dd><dt>Advanced Processes Model</dt><dd><ul><li><a href="/pandora/en/process/process_std.html">Custom Process</a></li><li><a href="/pandora/en/process/service_std.html">Custom Service</a></li><li><a href="/pandora/en/process/fork_and_cluster.html">Fork And Cluster</a></li><li><a href="/pandora/en/process/environment_std.html">Custom Environment</a></li><li><a href="/pandora/en/process/application_life_cycle.html">Application Life Cycle</a></li><li><a href="/pandora/en/process/ipc_hub.html">IPC-Hub</a></li></ul></dd><dt>Application Monitoring</dt><dd><ul><li><a href="/pandora/en/monitor/monitor_std.html">Overview of Monitoring</a></li><li><a href="/pandora/en/monitor/resource.html">Exposed RESTFul API</a></li><li><a href="/pandora/en/monitor/trace.html">Trace Each Requests</a></li><li><a href="/pandora/en/monitor/monitor_inner.html">Base Monitoring</a></li><li><a href="/pandora/en/monitor/endpoint.html">EndPoint usage and extension</a></li><li><a href="/pandora/en/monitor/metrics.html">Metrics usage and extension</a></li><li><a href="/pandora/en/monitor/report.html">Monitoring Data Report</a></li></ul></dd><dt>Monitoring Data Collection</dt><dd><ul><li><a href="/pandora/en/collect/health.html">Health Check</a></li></ul></dd><dt>Extension</dt><dd><ul><li><a href="/pandora/en/other/typescript.html">Start A TypeScript Project</a></li></ul></dd></dl>
</aside>
<script>
var mobileTrigger = document.getElementById('mobileTrigger');
var mobileAside = document.getElementById('mobileAside');
mobileTrigger.onclick = function(e) {
  e.preventDefault();
  if (mobileAside.className.indexOf('mobile-show') === -1) {
    mobileAside.className += ' mobile-show';
  } else {
    mobileAside.className = 'toc';
  }
};
</script>

</div>

  </div>
</body>
<div class="cnzz">
<script src="https://s19.cnzz.com/z_stat.php?id=1271324644&web_id=1271324644" language="JavaScript"></script>
</div>

</html>
